```markdown
# FAQ 客服后端服务

本项目实现了一个基于 FAQ 的客服后端服务，参考并对齐阿里云客服工作台中 FAQ 类目管理与 FAQ 管理的设计规范，聚焦于 **FAQ 知识管理与问答匹配能力**，用于支撑自动化客服或半自动客服场景。

参考文档：
- FAQ 类目管理：https://help.aliyun.com/zh/document_detail/421160.html
- FAQ 录入与管理：https://help.aliyun.com/zh/document_detail/421161.html

---

## 项目目标与范围

该项目只关注客服系统中的 **知识层与匹配层**，不尝试构建完整的对话机器人。

核心目标是：
- 提供结构清晰、可维护的 FAQ 数据模型
- 支持客服人员高效维护 FAQ 内容
- 在用户提问时，稳定、可解释地返回最合适的 FAQ 答案

---

## 核心功能

### 类目管理
- 支持 FAQ 一级类目、二级类目管理
- 类目以树形结构组织
- 类目删除约束：
  - 存在子类目的类目不可删除
  - 类目下存在 FAQ 时不可删除

### FAQ 管理
- FAQ 条目的创建、编辑与删除
- 每条 FAQ 包含一个标准问法，作为语义锚点
- 支持为同一 FAQ 配置多条相似问法
- 支持 FAQ 生效时间（开始时间 / 结束时间）
- 支持逻辑删除

### 答案管理
- 支持一问多答
- 答案可按使用场景区分（如 Web / App / 小程序）
- 支持不同答案类型（文本 / 富文本 / 卡片）

### 标签体系
- 支持全局标签定义
- FAQ 与标签为多对多关系
- 标签主要用于管理和筛选，不作为核心匹配依据

---

## 问答匹配设计

系统将 **FAQ 知识管理** 与 **语义匹配能力** 解耦：

- 关系型数据库负责存储：
  - 类目结构
  - FAQ 内容
  - 答案与元数据
  - 生命周期状态

- 向量检索仅用于：
  - 语义相似度计算
  - 将用户问题映射到对应的 FAQ

### 匹配流程

1. 用户提交自然语言问题
2. 将问题编码为向量表示
3. 在向量索引中检索 Top-K 相似问题
4. 解析得到对应的 FAQ
5. 根据生效时间、使用场景等规则返回最终答案

在核心匹配路径中不使用大语言模型，以保证：
- 响应延迟可控
- 行为结果稳定
- 不产生不可解释的回答

---

## 技术栈

- Python
- FastAPI
- SQLAlchemy（异步）
- MySQL / PostgreSQL
- 向量索引（FAISS / Milvus 等）
- 文本向量模型（Sentence-BERT / bge 系列）

---

## 接口说明

系统以 REST API 形式提供能力，包括：
- 类目管理接口
- FAQ 管理接口
- 相似问法与标签管理接口
- 问答匹配接口

接口文档通过 FastAPI 自动生成，可通过以下路径访问：

```

/docs

```

---

## 项目结构（简化）

```

app/
├── api/            # 接口定义
├── models/         # 数据模型
├── repositories/   # 数据访问层
├── schemas/        # 请求/响应模型
├── services/       # 业务逻辑
└── main.py

```

---

## 非目标说明

以下内容不在本项目实现范围内：
- 前端界面与客服工作台 UI
- 用户体系与权限管理
- 多轮对话与上下文管理
- 基于生成式模型的答案生成

这些能力通常由上游或下游系统负责。

---

## 说明

本项目更偏向 **工程化参考实现**，而非产品级 Demo，设计过程中优先考虑：
- 数据结构清晰
- 业务约束明确
- 行为可预测
- 易于扩展和维护
```
